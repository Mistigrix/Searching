<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>Searching ...</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="style.css" type="text/css">
    </head>

    <body>

        <div class="container">
            <form class="row" id="form-parent">
                <input id="search" class="mt-2 form-control form-control-lg" type="text" aria-label=".form-control-lg example" onclick="searchString('')">onblur="removeSearchOutput()"
            </form>

            <table id="monthsTable">
                <tr>
                  <th>Mois</th>
                  <th>Data</th>
                </tr>
                <tr>
                  <td class="name" urltarget="https://openclassrooms.com/">Janvier</td>
                  <td>10.01.2014</td>
                </tr>
                <tr>
                  <td class="name" urltarget="https://openclassrooms.com/">Février</td>
                  <td>10.01.2014</td>
                </tr>
                <tr>
                    <td class="name" urltarget="https://openclassrooms.com/">Mars</td>
                    <td>10.01.2014</td>
                  </tr>
                  <tr>
                    <td class="name" urltarget="https://openclassrooms.com/">Avril</td>
                    <td>10.01.2014</td>
                  </tr>
                  <tr>
                    <td class="name" urltarget="https://openclassrooms.com/">Mai</td>
                    <td>10.01.2015</td>
                  </tr>
                  <tr>
                    <td class="name" urltarget="https://openclassrooms.com/">Juin</td>
                    <td>10.01.2014</td>
                  </tr>
                  <tr>
                    <td class="name" urltarget="https://openclassrooms.com/">Juiller</td>
                    <td>10.01.2014</td>
                  </tr>
                  <tr>
                      <td class="name" urltarget="https://openclassrooms.com/">Aout</td>
                      <td>10.01.2014</td>
                    </tr>
                    <tr>
                      <td class="name" urltarget="https://openclassrooms.com/">Septembre</td>
                      <td>10.01.2014</td>
                    </tr>
                    <tr>
                      <td class="name" urltarget="https://openclassrooms.com/">Octobre</td>
                      <td>10.01.2015</td>
                    </tr>
                    <tr>
                  <td class="name" urltarget="https://openclassrooms.com/">Novembre</td>
                  <td>10.01.2014</td>
                </tr>
                <tr>
                  <td class="name" urltarget="https://openclassrooms.com/">Decembre</td>
                  <td>10.01.2014</td>
                </tr>
    
              </table>

              <p id="text"></p>
        </div>
        
        
        <script src="jquery.min.js"></script>
        <script type="text/javascript">

            let monthsTable = document.getElementById("monthsTable");

            $('#search').on('input',function(e)
            {
                searchString($(this).val());
            });

            let formParent = document.getElementById("form-parent");
            let firstChild = document.getElementById("search");
            let searchOutput = document.createElement('ul');
            searchOutput.id = 'search-output';
            searchOutput.classList.add('list-group');
            

            function searchString(str) {
                const months = monthsTable.getElementsByClassName('name');

                let month;
                let index;
                let result = "";


                for (let i=0; i < months.length; i++) {
                    month = months[i].innerText;
                    url = months[i].getAttribute('urltarget');

                    index = month.toLowerCase().indexOf(str.toLowerCase())

                    if (index !== -1) {
                        element = '<a class="list-group-item list-group-item-action" onclick=redirectTo('+'"'+url+'"'+')>' + month + '</a>'
                        element.href = "https://openclassrooms.com/"
                        result += element;
                        
                        console.log(month);
                    }
                }

                searchOutput.innerHTML = result;
                formParent.appendChild(searchOutput);
            }

            function removeSearchOutput() {
                
                document.getElementById('search-output').remove();
            }

            function redirectTo(url) {
                console.log("Tout ce passe comme prévut")
                return window.location.assign='http://www.w3docs.com/'
            }
            
        </script>
    </body>
</html>
